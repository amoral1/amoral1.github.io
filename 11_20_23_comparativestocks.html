<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Comparative Stock Visualization</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
  }
  .visualization-container {
    margin-bottom: 20px;
  }
  .text-content {
    text-align: left;
    padding: 20px;
  }
</style>
<script>
// Your existing JavaScript code for the visualization
(function() {
  window.HTMLWidgets = window.HTMLWidgets || {};
  var viewerMode = window.HTMLWidgets.viewerMode =
      /\bviewer_pane=1\b/.test(window.location);
  var shinyMode = window.HTMLWidgets.shinyMode =
      typeof(window.Shiny) !== "undefined" && !!window.Shiny.outputBindings;

  function querySelectorAll(scope, selector) {
    if (typeof(jQuery) !== "undefined" && scope instanceof jQuery) {
      return scope.find(selector);
    }
    if (scope.querySelectorAll) {
      return scope.querySelectorAll(selector);
    }
  }

  function asArray(value) {
    if (value === null)
      return [];
    if ($.isArray(value))
      return value;
    return [value];
  }

  function extend(target /*, ... */) {
    if (arguments.length == 1) {
      return target;
    }
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var prop in source) {
        if (source.hasOwnProperty(prop)) {
          target[prop] = source[prop];
        }
      }
    }
    return target;
  }

  function forEach(values, callback, thisArg) {
    if (values.forEach) {
      values.forEach(callback, thisArg);
    } else {
      for (var i = 0; i < values.length; i++) {
        callback.call(thisArg, values[i], i, values);
      }
    }
  }

  function overrideMethod(target, methodName, funcSource) {
    var superFunc = target[methodName] || function() {};
    var superFuncBound = function() {
      return superFunc.apply(target, arguments);
    };
    target[methodName] = funcSource(superFuncBound);
  }

  function delegateMethod(delegator, delegatee, methodName) {
    var inherited = delegator[methodName];
    delegator[methodName] = function() {
      var target = delegatee;
      var method = delegatee[methodName];
      if (!method) {
        target = delegator;
        method = inherited;
      }
      if (method) {
        return method.apply(target, arguments);
      }
    };
  }

  function elementData(el, name, value) {
    if (arguments.length == 2) {
      return el["htmlwidget_data_" + name];
    } else if (arguments.length == 3) {
      el["htmlwidget_data_" + name] = value;
      return el;
    } else {
      throw new Error("Wrong number of arguments for elementData: " +
        arguments.length);
    }
  }

  function escapeRegExp(str) {
    return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
  }

  function hasClass(el, className) {
    var re = new RegExp("\\b" + escapeRegExp(className) + "\\b");
    return re.test(el.className);
  }

  function filterByClass(elements, className, include) {
    var results = [];
    for (var i = 0; i < elements.length; i++) {
      if (hasClass(elements[i], className) == include)
        results.push(elements[i]);
    }
    return results;
  }

  function on(obj, eventName, func) {
    if (obj.addEventListener) {
      obj.addEventListener(eventName, func, false);
    } else if (obj.attachEvent) {
      obj.attachEvent(eventName, func);
    }
  }

  function off(obj, eventName, func) {
    if (obj.removeEventListener)
      obj.removeEventListener(eventName, func, false);
    else if (obj.detachEvent) {
      obj.detachEvent(eventName, func);
    }
  }

  function unpackPadding(value) {
    if (typeof(value) === "number")
      value = [value];
    if (value.length === 1) {
      return {top: value[0], right: value[0], bottom: value[0], left: value[0]};
    }
    if (value.length === 2) {
      return {top: value[0], right: value[1], bottom: value[0], left: value[1]};
    }
    if (value.length === 3) {
      return {top: value[0], right: value[1], bottom: value[2], left: value[1]};
    }
    if (value.length === 4) {
      return {top: value[0], right: value[1], bottom: value[2], left: value[3]};
    }
  }

  function paddingToCss(paddingObj) {
    return paddingObj.top + "px " + paddingObj.right + "px " + paddingObj.bottom + "px " + paddingObj.left + "px";
  }

  function px(x) {
    if (typeof(x) === "number")
      return x + "px";
    else
      return x;
  }

  function sizingPolicy(el) {
    var sizingEl = document.querySelector("script[data-for='" + el.id + "'][type='application/htmlwidget-sizing']");
    if (!sizingEl)
      return null;
    var sp = JSON.parse(sizingEl.textContent || sizingEl.text || "{}");
    if (viewerMode) {
      return sp.viewer;
    } else {
      return sp.browser;
    }
  }

  function evalAndRun(tasks, target, args) {
    if (tasks) {
      forEach(tasks, function(task) {
        var theseArgs = args;
        if (typeof(task) === "object") {
          theseArgs = theseArgs.concat([task.data]);
          task = task.code;
        }
        var taskFunc = tryEval(task);
        if (typeof(taskFunc) !== "function") {
          throw new Error("Task must be a function! Source:\n" + task);
        }
        taskFunc.apply(target, theseArgs);
      });
    }
  }

  function tryEval(code) {
    var result = null;
    try {
      result = eval("(" + code + ")");
    } catch(error) {
      if (!(error instanceof SyntaxError)) {
        throw error;
      }
      try {
        result = eval(code);
      } catch(e) {
        if (e instanceof SyntaxError) {
          throw error;
        } else {
          throw e;
        }
      }
    }
    return result;
  }

  function initSizing(el) {
    var sizing = sizingPolicy(el);
    if (!sizing)
      return;

    var cel = document.getElementById("htmlwidget_container");
    if (!cel)
      return;

    if (typeof(sizing.padding) !== "undefined") {
      document.body.style.margin = "0";
      document.body.style.padding = paddingToCss(unpackPadding(sizing.padding));
    }

    if (sizing.fill) {
      document.body.style.overflow = "hidden";
      document.body.style.width = "100%";
      document.body.style.height = "100%";
      document.documentElement.style.width = "100%";
      document.documentElement.style.height = "100%";
      cel.style.position = "absolute";
      var pad = unpackPadding(sizing.padding);
      cel.style.top = pad.top + "px";
      cel.style.right = pad.right + "px";
      cel.style.bottom = pad.bottom + "px";
      cel.style.left = pad.left + "px";
      el.style.width = "100%";
      el.style.height = "100%";

      return {
        getWidth: function() { return cel.getBoundingClientRect().width; },
        getHeight: function() { return cel.getBoundingClientRect().height; }
      };

    } else {
      el.style.width = px(sizing.width);
      el.style.height = px(sizing.height);

      return {
        getWidth: function() { return cel.getBoundingClientRect().width; },
        getHeight: function() { return cel.getBoundingClientRect().height; }
      };
    }
  }

  var defaults = {
    find: function(scope) {
      return querySelectorAll(scope, "." + this.name);
    },
    renderError: function(el, err) {
      var $el = $(el);

      this.clearError(el);

      var errClass = "shiny-output-error";
      if (err.type !== null) {
        errClass = errClass + " " + $.map(asArray(err.type), function(type) {
          return errClass + "-" + type;
        }).join(" ");
      }
      errClass = errClass + " htmlwidgets-error";

      var display = $el.css("display");
      $el.data("restore-display-mode", display);

      if (display === "inline" || display === "inline-block") {
        $el.hide();
        if (err.message !== "") {
          var errorSpan = $("<span>").addClass(errClass);
          errorSpan.text(err.message);
          errorSpan.insertAfter($el);
        }
      } else {
        $el.addClass(errClass);
        if (err.message !== "") {
          $el.text(err.message);
        }
      }
    },
    clearError: function(el) {
      var $el = $(el);

      var display = $el.data("restore-display-mode");
      if (display !== null) {
        $el.css("display", display);
        $el.data("restore-display-mode", null);
      } else {
        $el.removeClass("shiny-output-error htmlwidgets-error");
      }

      var errorNext = $el.next("span.shiny-output-error:visible");
      if (errorNext.length > 0) {
        errorNext.remove();
      }
    }
  };

  window.HTMLWidgets.widgets = {};

  window.HTMLWidgets.widget = function(def) {

    var constructor = function(el, width, height) {
      this.el = el;
      this.renderValue = def.renderValue;
      if (def.resize) this.resize = def.resize;

      var initResult;
      if (def.initialize) {
        initResult = def.initialize(el, width, height);
        if (initResult && typeof(initResult.then) === "function") {
          this.renderValue = (function(oldRenderValue) {
            return function() {
              var that = this, args = arguments;
              initResult.then(function() {
                oldRenderValue.apply(that, args);
              });
            };
          })(this.renderValue);
        }
      }
    };

    constructor.prototype.name = def.name;
    constructor.prototype.type = def.type;
    constructor.prototype.find = def.find || defaults.find;
    constructor.prototype.renderError = def.renderError || defaults.renderError;
    constructor.prototype.clearError = def.clearError || defaults.clearError;

    window.HTMLWidgets.widgets[def.name] = constructor;
  };

  window.HTMLWidgets.widget({
    name: 'leaflet',
    type: 'output',
    initialize: function(el, width, height) {
      // do nothing
    },
    renderValue: function(el, x, instance) {
      // dynamically require leaflet, if not already present
      if (typeof(window.L) !== "undefined") {
        renderLeaflet(el, x, instance);
      } else {
        var leafletDeps = {
          scripts: [
            { "src": "https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js" }
          ],
          stylesheets: [
            { "href": "https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" }
          ]
        };

        if (window.htmlwidgets) {
          htmlwidgets.load(leafletDeps, function() {
            renderLeaflet(el, x, instance);
          });
        } else {
          var $head = $("head");
          var $body = $("body");

          var scripts = leafletDeps.scripts.map(function(script) {
            return $.getScript(script.src);
          });

          var stylesheets = leafletDeps.stylesheets.map(function(stylesheet) {
            var link = document.createElement("link");
            link.rel = "stylesheet";
            link.type = "text/css";
            link.href = stylesheet.href;
            return link;
          });

          $head.append(stylesheets);
          $.when.apply($, scripts).done(function() {
            renderLeaflet(el, x, instance);
          });
        }
      }
    }
  });

  function renderLeaflet(el, x, instance) {
    if (!x.hasOwnProperty('widgets')) {
      throw new Error("leaflet: invalid data structure");
    }

    if (typeof(L) === "undefined") {
      return;
    }

    // find the existing map, if present
    var map = $(el).data("leaflet-map");

    if (map) {
      map.remove();
    }

    // Create new map
    map = L.map(el).setView(x.initialCenter, x.initialZoom);

    // add the tile layer
    L.tileLayer(x.tileUrl, x.tileOptions).addTo(map);

    // add markers
    x.markers.forEach(function(marker) {
      var markerOptions = {
        icon: marker.icon ? L.icon(marker.icon) : undefined
      };
      var newMarker = L.marker(marker.latLng, markerOptions).addTo(map);
      if (marker.popup) {
        newMarker.bindPopup(marker.popup);
      }
    });

    // add paths
    x.paths.forEach(function(path) {
      var pathOptions = {
        color: path.color,
        weight: path.weight,
        opacity: path.opacity
      };
      var newPath = L.polyline(path.latLngs, pathOptions).addTo(map);
      if (path.popup) {
        newPath.bindPopup(path.popup);
      }
    });

    // save the map instance
    $(el).data("leaflet-map", map);
  }

})();
</script>
</head>
<body>
<div class="visualization-container" id="htmlwidget_container">
  <div id="my_visual"></div>
</div>
<div class="text-content">
  <p>Note: The range selector at the bottom of the graph will show more accuracy in rates, when utilized.
	According to the chart Moderna (MRNA) experienced the highest closes of all of the participating companies involved in producing and distributing a Covid-19 coronavirus vaccine. During the last 5 years (MRNA) held  a maximum close equal to ~491 in August, 2021.<p>
<p> Since then, Moderna's stock closing rates have fallen and not experienced such heights since. 
	<br><p></p>Pfizer (PFE) did have some relative growth during this window of time, but not only until January 2022. Johnson (JNJ) has held a steady pace with its closings throughout the years. Despite Johnson's vaccine being removed from the market in early 2022, this did not seem to affect their stocks, maintaining a steady plateau until recently where their stocks have been going up. 
</div>
</body>
</html>
